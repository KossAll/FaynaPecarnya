var d=document,itemBox=d.querySelectorAll(".item_box"),cartCont=d.getElementById("cart_content");function addEvent(t,e,r){return t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent("on"+e,(function(){r.call(t)})),!1}function getCartData(){return JSON.parse(localStorage.getItem("cart"))}function setCartData(t){return localStorage.setItem("cart",JSON.stringify(t)),!1}function addToCart(t){this.disabled=!0;var e=getCartData()||{},r=this.parentNode,a=this.getAttribute("data-id"),n=r.querySelector(".item_title").innerHTML,o=r.querySelector(".item_price").innerHTML;return e.hasOwnProperty(a)?e[a][2]+=1:e[a]=[n,o,1],setCartData(e)||(this.disabled=!1),!1}for(var i=0;i<itemBox.length;i++)addEvent(itemBox[i].querySelector(".add_item"),"click",addToCart);function openCart(t){var e=getCartData(),r="";if(null!==e){for(var a in r='<table class="shopping_list"><tr><th>Назва</th><th>Ціна</th><th>Кількість</th></tr>',e){r+="<tr>";for(var n=0;n<e[a].length;n++)r+="<td>"+e[a][n]+"</td>";r+="</tr>"}r+="</table>",cartCont.innerHTML=r}else cartCont.innerHTML="В корзине пусто!";return!1}function sendOrderToEmail(){var t=getCartData();if(null!==t){var e="";for(var r in t){e+=t[r][0]+" - "+t[r][1]+" - "+t[r][2]+" шт.\n"}var a="Детали заказа:\n\n"+e,n="mailto:wildfow85@gmail.com?subject="+encodeURIComponent("Заказ из интернет-магазина")+"&body="+encodeURIComponent(a);window.location.href=n}else alert("Корзина пуста! Добавьте товары перед оформлением заказа.");return!1}function addToCart(t){this.disabled=!0;var e=getCartData()||{},r=this.parentNode,a=this.getAttribute("data-id"),n=r.querySelector(".item_title").innerHTML,o=r.querySelector(".item_price").innerHTML;return e.hasOwnProperty(a)?e[a][2]+=1:e[a]=[n,o,1],setCartData(e)||(this.disabled=!1),openCart(t),!1}function openCart(t){var e=getCartData(),r="",a=0;if(null!==e){for(var n in r='<table class="shopping_list"><tr><th>назва</th><th>ціна</th><th>кількість</th><th>сума</th></tr>',e){r+="<tr>";for(var o=0;o<e[n].length;o++)r+="<td>"+e[n][o]+"</td>";var i=parseFloat(e[n][1].replace(/\s+/g,"").replace(",","."))*e[n][2];r+="<td>"+i.toFixed(2)+"</td>",r+="</tr>",a+=i}r+='<tr><td colspan="3"><strong>до сплати:</strong></td><td>'+a.toFixed(2)+"</td></tr>",r+="</table>",cartCont.innerHTML=r}else cartCont.innerHTML="В корзине пусто!";return!1}function removeOneItem(t){var e=getCartData();null!==e&&e.hasOwnProperty(t)&&(e[t][2]>1?e[t][2]-=1:delete e[t],setCartData(e),openCart())}addEvent(d.getElementById("checkout"),"click",openCart),addEvent(d.getElementById("clear_cart"),"click",(function(t){localStorage.removeItem("cart"),cartCont.innerHTML="Кошик пустий."})),addEvent(d.getElementById("checkout"),"click",(function(t){openCart(t),sendOrderToEmail()})),addEvent(d.getElementById("checkout"),"click",openCart);var removeButtons=document.querySelectorAll(".away_item");for(i=0;i<removeButtons.length;i++)addEvent(removeButtons[i],"click",(function(t){removeOneItem(this.getAttribute("data-id"))}));
//# sourceMappingURL=shop.bbb67903.js.map
