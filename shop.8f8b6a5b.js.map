{"mappings":"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","sources":["src/js/cart.js"],"sourcesContent":["\n    itemBox = document.querySelectorAll('.item_box'), // блок каждого товара\n    cartCont = document.getElementById('cart_content'); // блок вывода данных корзины\n// Функция кроссбраузерной установка обработчика событий\nfunction addEvent(elem, type, handler){\n  if(elem.addEventListener){\n    elem.addEventListener(type, handler, false);\n  } else {\n    elem.attachEvent('on'+type, function(){ handler.call( elem ); });\n  }\n  return false;\n}\n// Получаем данные из LocalStorage\nfunction getCartData(){\n  return JSON.parse(localStorage.getItem('cart'));\n}\n// Записываем данные в LocalStorage\nfunction setCartData(o){\n  localStorage.setItem('cart', JSON.stringify(o));\n  return false;\n}\n// Добавляем товар в корзину\nfunction addToCart(e){\n  this.disabled = true; // блокируем кнопку на время операции с корзиной\n  \n  const cartData = getCartData() || {}, // получаем данные корзины или создаём новый объект, если данных еще нет  \n    parentBox = this.parentNode, // родительский элемент кнопки \"Добавить в корзину\"\n      itemId = this.getAttribute('data-id'), // ID товара\n      itemTitle = parentBox.querySelector('.item_title').innerHTML, // название товара\n      itemPrice = parentBox.querySelector('.item_price').innerHTML; // стоимость товара\n  if(cartData.hasOwnProperty(itemId)){ // если такой товар уже в корзине, то добавляем +1 к его количеству\n    cartData[itemId][2] += 1;\n  } else { // если товара в корзине еще нет, то добавляем в объект\n    cartData[itemId] = [itemTitle, itemPrice, 1];\n  }\n  if(!setCartData(cartData)){ // Обновляем данные в LocalStorage\n    this.disabled = false; // разблокируем кнопку после обновления LS\n  }\n return false;\n}\n// Устанавливаем обработчик события на каждую кнопку \"Добавить в корзину\"\nfor(let i = 0; i < itemBox.length; i++){\n  addEvent(itemBox[i].querySelector('.add_item'), 'click', addToCart);\n}\n// Открываем корзину со списком добавленных товаров\nfunction openCart(e){\n  const cartData = getCartData(),  // вытаскиваем все данные корзины\n    totalItems = '';\n  \n  // если что-то в корзине уже есть, начинаем формировать данные для вывода\n  if(cartData !== null){\n    totalItems = '<div><table class=\"shopping_list\"><tr><th>Назва</th><th>Ціна</th><th>Кількість</th></tr></div>';\n    for(var items in cartData){\n      totalItems += '<tr>';\n      for(var i = 0; i < cartData[items].length; i++){\n        totalItems += '<td>' + cartData[items][i] + '</td>';\n      }\n      totalItems += '</tr>';\n    }\n    totalItems += '</table>';\n    cartCont.innerHTML = totalItems;\n  } else {\n    // если в корзине пусто, то сигнализируем об этом\n    cartCont.innerHTML = 'В корзине пусто!';\n  }\n  return false;\n}\n// /* Открыть корзину */\naddEvent(document.getElementById('checkout'), 'click', openCart);\n/* Очистить корзину */\naddEvent(document.getElementById('clear_cart'), 'click', function(e){\n  localStorage.removeItem('cart');\n  cartCont.innerHTML = 'Кошик пустий.';\n});\n\n\n// Функция отправки заказа на почту\nfunction sendOrderToEmail() {\n  var cartData = getCartData(); // Получаем данные корзины\n\n  // Если корзина не пуста\n  if (cartData !== null) {\n    var orderDetails = '';\n    for (var items in cartData) {\n      var itemTitle = cartData[items][0]; // Название товара\n      var itemPrice = cartData[items][1]; // Стоимость товара\n      var itemQuantity = cartData[items][2]; // Количество товара\n\n      // Формируем строку с деталями заказа\n      orderDetails += itemTitle + ' - ' + itemPrice + ' - ' + itemQuantity + ' шт.\\n';\n    }\n\n    // Здесь замените 'your-email@example.com' на ваш email\n    var recipientEmail = 'wildfow85@gmail.com';\n    var emailSubject = 'Заказ из интернет-магазина';\n    var emailBody = 'Детали заказа:\\n\\n' + orderDetails;\n\n    // Создаем ссылку для отправки письма\n    var mailToLink = 'mailto:' + recipientEmail + '?subject=' + encodeURIComponent(emailSubject) + '&body=' + encodeURIComponent(emailBody);\n\n    // Открываем ссылку для отправки письма\n    window.location.href = mailToLink;\n  } else {\n    alert('Корзина пуста! Добавьте товары перед оформлением заказа.');\n  }\n\n  return false;\n}\n\n/* Открыть корзину */\naddEvent(document.getElementById('checkout'), 'click', function(e){\n  openCart(e); // Открываем корзину со списком добавленных товаров\n  sendOrderToEmail(); // Отправляем заказ на почту\n});\n\nfunction addToCart(e) {\n  this.disabled = true; // блокируем кнопку на время операции с корзиной\n  var cartData = getCartData() || {}, // получаем данные корзины или создаём новый объект, если данных еще нет\n      parentBox = this.parentNode, // родительский элемент кнопки \"Добавить в корзину\"\n      itemId = this.getAttribute('data-id'), // ID товара\n      itemTitle = parentBox.querySelector('.item_title').innerHTML, // название товара\n      itemPrice = parentBox.querySelector('.item_price').innerHTML; // стоимость товара\n  if (cartData.hasOwnProperty(itemId)) { // если такой товар уже в корзине, то добавляем +1 к его количеству\n    cartData[itemId][2] += 1;\n  } else { // если товара в корзине еще нет, то добавляем в объект\n    cartData[itemId] = [itemTitle, itemPrice, 1];\n  }\n  if (!setCartData(cartData)) { // Обновляем данные в LocalStorage\n    this.disabled = false; // разблокируем кнопку после обновления LS\n  }\n\n  // Show the cart content after adding the item\n  openCart(e);\n\n  return false;\n}\n\n/* Открыть корзину */\naddEvent(document.getElementById('checkout'), 'click', openCart);\n\n\n// Открываем корзину со списком добавленных товаров\nfunction openCart(e) {\n  var cartData = getCartData(); // вытаскиваем все данные корзины\n  var totalItems = '';\n  var totalPrice = 0; // добавляем переменную для общей суммы покупки\n\n  // если что-то в корзине уже есть, начинаем формировать данные для вывода\n  if (cartData !== null) {\n    totalItems = '<table class=\"shopping_list\"><tr><th>назва</th><th>ціна</th><th>кількість</th><th>сума</th></tr>';\n    for (var items in cartData) {\n      totalItems += '<tr>';\n      for (var i = 0; i < cartData[items].length; i++) {\n        totalItems += '<td>' + cartData[items][i] + '</td>';\n      }\n\n      // Calculate and display the individual item amount (price * quantity)\n      var itemPrice = parseFloat(cartData[items][1].replace(/\\s+/g, '').replace(',', '.')); // assuming the price format is \"123.45\" or \"123,45\"\n      var itemQuantity = cartData[items][2];\n      var itemAmount = itemPrice * itemQuantity;\n      totalItems += '<td>' + itemAmount.toFixed(2) + '</td>';\n\n      totalItems += '</tr>';\n\n      // Accumulate the total purchase amount\n      totalPrice += itemAmount;\n    }\n\n    totalItems += '<tr><td colspan=\"3\"><strong>до сплати:</strong></td><td>' + totalPrice.toFixed(2) + '</td></tr>';\n    totalItems += '</table>';\n    cartCont.innerHTML = totalItems;\n  } else {\n    // если в корзине пусто, то сигнализируем об этом\n    cartCont.innerHTML = 'В корзине пусто!';\n  }\n  return false;\n}\n\n\n// Удалить один товар из корзины\nfunction removeOneItem(itemId) {\n  var cartData = getCartData();\n\n  if (cartData !== null && cartData.hasOwnProperty(itemId)) {\n    if (cartData[itemId][2] > 1) {\n      cartData[itemId][2] -= 1;\n    } else {\n      delete cartData[itemId];\n    }\n    setCartData(cartData); // Обновляем данные в LocalStorage\n    openCart(); // Обновляем содержимое корзины после удаления товара\n  }\n}\n\n// Устанавливаем обработчик события на каждую кнопку \"Удалить товар\"\nvar removeButtons = document.querySelectorAll('.away_item');\nfor (var i = 0; i < removeButtons.length; i++) {\n  addEvent(removeButtons[i], 'click', function (e) {\n    var itemId = this.getAttribute('data-id');\n    removeOneItem(itemId);\n  });\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":["addEvent","elem","type","handler","addEventListener","attachEvent","call","getCartData","JSON","parse","localStorage","getItem","setCartData","o","setItem","stringify","addToCart","e","this","disabled","cartData","parentBox","parentNode","itemId","getAttribute","itemTitle","querySelector","innerHTML","itemPrice","hasOwnProperty","itemBox","document","querySelectorAll","cartCont","getElementById","i","length","openCart","totalItems","items","i2","sendOrderToEmail","orderDetails","emailBody","mailToLink","encodeURIComponent","window","location","href","alert","totalPrice","i3","itemAmount","parseFloat","replace","toFixed","removeOneItem","removeItem","removeButtons","i1"],"version":3,"file":"shop.8f8b6a5b.js.map"}