function addEvent(t,e,r){return t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent("on"+e,(function(){r.call(t)})),!1}function getCartData(){return JSON.parse(localStorage.getItem("cart"))}function setCartData(t){return localStorage.setItem("cart",JSON.stringify(t)),!1}function addToCart(t){this.disabled=!0;var e=getCartData()||{},r=this.parentNode,n=this.getAttribute("data-id"),a=r.querySelector(".item_title").innerHTML,o=r.querySelector(".item_price").innerHTML;return e.hasOwnProperty(n)?e[n][2]+=1:e[n]=[a,o,1],setCartData(e)||(this.disabled=!1),!1}itemBox=document.querySelectorAll(".item_box"),cartCont=document.getElementById("cart_content");for(var i=0;i<itemBox.length;i++)addEvent(itemBox[i].querySelector(".add_item"),"click",addToCart);function openCart(t){var e=getCartData(),r="";if(null!==e){for(var n in r='<div><table class="shopping_list"><tr><th>Назва</th><th>Ціна</th><th>Кількість</th></tr></div>',e){r+="<tr>";for(var a=0;a<e[n].length;a++)r+="<td>"+e[n][a]+"</td>";r+="</tr>"}r+="</table>",cartCont.innerHTML=r}else cartCont.innerHTML="В корзине пусто!";return!1}function sendOrderToEmail(){var t=getCartData();if(null!==t){var e="";for(var r in t){e+=t[r][0]+" - "+t[r][1]+" - "+t[r][2]+" шт.\n"}var n="Детали заказа:\n\n"+e,a="mailto:wildfow85@gmail.com?subject="+encodeURIComponent("Заказ из интернет-магазина")+"&body="+encodeURIComponent(n);window.location.href=a}else alert("Корзина пуста! Добавьте товары перед оформлением заказа.");return!1}function addToCart(t){this.disabled=!0;var e=getCartData()||{},r=this.parentNode,n=this.getAttribute("data-id"),a=r.querySelector(".item_title").innerHTML,o=r.querySelector(".item_price").innerHTML;return e.hasOwnProperty(n)?e[n][2]+=1:e[n]=[a,o,1],setCartData(e)||(this.disabled=!1),openCart(t),!1}function openCart(t){var e=getCartData(),r="",n=0;if(null!==e){for(var a in r='<table class="shopping_list"><tr><th>назва</th><th>ціна</th><th>кількість</th><th>сума</th></tr>',e){r+="<tr>";for(var o=0;o<e[a].length;o++)r+="<td>"+e[a][o]+"</td>";var i=parseFloat(e[a][1].replace(/\s+/g,"").replace(",","."))*e[a][2];r+="<td>"+i.toFixed(2)+"</td>",r+="</tr>",n+=i}r+='<tr><td colspan="3"><strong>до сплати:</strong></td><td>'+n.toFixed(2)+"</td></tr>",r+="</table>",cartCont.innerHTML=r}else cartCont.innerHTML="В корзине пусто!";return!1}function removeOneItem(t){var e=getCartData();null!==e&&e.hasOwnProperty(t)&&(e[t][2]>1?e[t][2]-=1:delete e[t],setCartData(e),openCart())}addEvent(document.getElementById("checkout"),"click",openCart),addEvent(document.getElementById("clear_cart"),"click",(function(t){localStorage.removeItem("cart"),cartCont.innerHTML="Кошик пустий."})),addEvent(document.getElementById("checkout"),"click",(function(t){openCart(t),sendOrderToEmail()})),addEvent(document.getElementById("checkout"),"click",openCart);for(var removeButtons=document.querySelectorAll(".away_item"),i1=0;i1<removeButtons.length;i1++)addEvent(removeButtons[i1],"click",(function(t){removeOneItem(this.getAttribute("data-id"))}));
//# sourceMappingURL=shop.8f8b6a5b.js.map
